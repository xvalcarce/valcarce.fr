<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
    content="map[name:Xavier Valcarce]">
<meta name="description"
    content="Disclaimer This is a pet project to help me understand the relatively new programming language Julia. I don’t guarantee that the code in this blog post is optimal, nor respect all Julia conventions.
Algorithm objective An implementation of the one-time pad encryption algorithm, based on the XOR gate. The code should be able to encrypt any given file by generating a key of this file’s size and XORing the file with the key, bit-by-bit." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="localhost/posts/onetimepadjl/" />


<title>
    
    Julia - One-Time Pad (XOR) :: Xavier Valcarce  — Physicist
    
</title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/localhost/main.min.99e608e080302cad1a41310a7b9d738c633ee387c9ba41103dcf36e2056c08dc.css">



<link rel="apple-touch-icon" sizes="180x180" href="/localhost/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/localhost/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/localhost/favicon-16x16.png">
<link rel="manifest" href="/localhost/site.webmanifest">
<link rel="mask-icon" href="/localhost/safari-pinned-tab.svg" color="#252627">
<link rel="shortcut icon" href="/localhost/favicon.ico">
<meta name="theme-color" content="#252627"><meta itemprop="name" content="Julia - One-Time Pad (XOR)">
<meta itemprop="description" content="Disclaimer This is a pet project to help me understand the relatively new programming language Julia. I don’t guarantee that the code in this blog post is optimal, nor respect all Julia conventions.
Algorithm objective An implementation of the one-time pad encryption algorithm, based on the XOR gate. The code should be able to encrypt any given file by generating a key of this file’s size and XORing the file with the key, bit-by-bit.">
<meta itemprop="datePublished" content="2020-02-06T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-02-06T00:00:00+00:00" />
<meta itemprop="wordCount" content="607">
<meta itemprop="image" content="localhost"/>



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="localhost"/>

<meta name="twitter:title" content="Julia - One-Time Pad (XOR)"/>
<meta name="twitter:description" content="Disclaimer This is a pet project to help me understand the relatively new programming language Julia. I don’t guarantee that the code in this blog post is optimal, nor respect all Julia conventions.
Algorithm objective An implementation of the one-time pad encryption algorithm, based on the XOR gate. The code should be able to encrypt any given file by generating a key of this file’s size and XORing the file with the key, bit-by-bit."/>




<meta property="article:published_time" content="2020-02-06 00:00:00 &#43;0000 UTC" />







    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">xav@valcarce.fr $ </span>
            <span class="logo__cursor"></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="localhost/posts/">Posts</a></li><li><a href="localhost/resume/">Resume</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>3 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title"><a href="localhost/posts/onetimepadjl/">Julia - One-Time Pad (XOR)</a></h1>

            

            <div class="post-content">
                <h2 id="disclaimer">Disclaimer</h2>
<p>This is a pet project to help me understand the relatively new programming language <a href="https://julialang.org">Julia</a>. I don’t guarantee that the code in this blog post is optimal, nor respect all Julia conventions.</p>
<h2 id="algorithm-objective">Algorithm objective</h2>
<p>An implementation of the one-time pad encryption algorithm, based on the XOR gate. The code should be able to encrypt any given file by generating a key of this file’s size and XORing the file with the key, bit-by-bit. We want the code to also be able to do the reverse; given a key and an encrypted file, run the XOR to get the original file.</p>
<h2 id="code">Code</h2>
<h3 id="part-1-arguments-and-help">Part 1: Arguments and help</h3>
<pre><code>HELP = &quot;xore.jl usage:
    xore.jl [enc|dec] [filename [keyfile]]
    Options:
        enc : encrypt file. Generated file will be the filename.enc and generated key filename.key
        dec : decrypt file. [keyfile] argument required
        &quot;

# Test arguments
@assert (length(ARGS)==2 || length(ARGS)==3) HELP
@assert (ARGS[1]==&quot;enc&quot; || ARGS[1]==&quot;dec&quot;) HELP
@assert isfile(ARGS[2]) &quot;Can not find provided file&quot;
if ARGS[1]==&quot;dec&quot;
    @assert length(ARGS)==3 &quot;Keyfile argument missing&quot;
    @assert isfile(ARGS[3]) &quot;Can not find provided keyfile&quot;
end

# Filling variable
filename = ARGS[2]
extension = findlast(isequal('.'),ARGS[2])
if extension!=nothing
    file = filename[1:extension-1]
else
    file = filename
end
</code></pre><p>This the meta part of our program. Our program takes 2 or 3 arguments. The first one, either enc or dec set the mode of our program (decryption or encryption mode). The second one is the file to encrypt/decrypt. Finally, if the decryption mode is trigge, we need the file containing the key .
Some checks are made using assert to ensure that provided arguments, and arguments number, are correct.</p>
<h3 id="part-2-io">Part 2: I/O</h3>
<p>Let’s now study how one can read a given file and store it into a variable.</p>
<pre><code># Read file to byte arrays
f = open(filename, &quot;r&quot;)
data = UInt8[]
readbytes!(f,data,Inf)
close(f)
</code></pre><p>This open the file with the open function — argument r is for read only. We then create an array of type UInt8. Finally, we read the file by byte, and store them in the previously declared array. The Inf argument is to read to entire file — this way we don’t need to provide the length (number of byte) of our file.</p>
<h3 id="part-3-encryption">Part 3: Encryption</h3>
<p>Here is the encryption section in which we generate the key, encrypt the file and save both the encrypted version of the file and the key.</p>
<pre><code>if ARGS[1]==&quot;enc&quot;
    # Genearting key of the file's size
    key = rand(UInt8,size(data)[1])

    # Generating encrypted file
    enc = UInt8[]
    for (i,d) in enumerate(data)
        push!(enc,xor(d,key[i]))
    end

    # Saving everything
    @assert !isfile(file*&quot;.scrt&quot;) &quot;enc.scrt file already exist in current directory&quot;
    enc_file = open(file*&quot;.scrt&quot;, &quot;w&quot;)
    write(enc_file, enc)
    close(enc_file)

    @assert !isfile(file*&quot;.key&quot;) &quot;enc.key file already exist in current directory&quot;
    key_file = open(file*&quot;.key&quot;, &quot;w&quot;)
    write(key_file, key)
    close(key_file)
</code></pre><p>The key is generated using the rand function. The key consists of an UInt8 array of the file’s size (number of byte).
We then proceed to the encryption by XOR-ing the file and the key, storing everything in the newly created enc array. The XOR bit-wise operation is done by the built-in xor function.
Finally, we save the encrypted file as well as the key using the name of the file (without the extension). A small check is made for the existence of such file, in order not to erase unintentionally potential files.</p>
<h3 id="part-3-decryption">Part 3: Decryption</h3>
<pre><code>else
    # Read the keyfile
    k = open(ARGS[3], &quot;r&quot;)
    key = UInt8[]
    readbytes!(k,key,Inf)
    close(k)

    # Decryption
    dec = UInt8[]
    for (i,d) in enumerate(data)
        push!(dec,xor(d,key[i]))
    end

    #Saving decrypted file
    dec_file = open(file*&quot;.clear&quot;, &quot;w&quot;)
    write(dec_file, dec)
    close(dec_file)
end
</code></pre><p>This is the decryption mode. It works in a similar manner as the encryption process, no further explanation are required to understand this part of the code.</p>

            </div>
        </article>

        <hr />

        <div class="post-info">

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>607 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>6060-02-02 00:60</p>
        </div>

        

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2021</span>
            
            
                <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span><a href="localhost/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
	
</footer>

            
        </div>

        




<script type="text/javascript" src="/localhost/bundle.min.4c3fb12a087ceed4a52cb5d57068a9795c7069617a01ca70f788052ad66e1791779e6c72686e1dc0ca13dc03b0203204b6566bb0dd1ee80de2b7ff4d8fe53db2.js" integrity="sha512-TD&#43;xKgh87tSlLLXVcGipeVxwaWF6Acpw94gFKtZuF5F3nmxyaG4dwMoT3AOwIDIEtlZrsN0e6A3it/9Nj&#43;U9sg=="></script>



    </body>
</html>
